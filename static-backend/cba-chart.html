<!DOCTYPE html>
<html lang="en">
<head></head>
<body style="background-color: #fff ">
    <!--<div style="width: 1536px; background-color: #fff ">-->
    <div style="width: 2000px; background-color: #fff ">
        <div id="chartCandlestick"></div>
        <div id="chartBar"></div>
    </div>
    <link href="http://localhost:2520/asset/apexcharts/apexcharts.css"  rel="stylesheet" />
    <script src="http://localhost:2520/asset/apexcharts/apexcharts.min.js"></script>
<script>

window.initChart = function(body) {
    const optionsCandlestick = {
        chart: {
            height: 750,
            type: 'candlestick',
            toolbar: {show: false},
            animations: {
                enabled: false
            }
        },
        plotOptions: {
            candlestick: {
                colors: {
                    upward: '#3C90EB',
                    downward: '#DF7D46'
                },
            }
        },
        series: [],
        title: {
            text: 'Commonwealth Bank Of Australia. (CBA.AX)',
            align: 'left'
        },
        xaxis: {
            type: 'category',
            labels: {
                trim: false,
                hideOverlappingLabels: true,
//                formatter: function (value, timestamp, index) {
//                    return index && index%2 || !value ? '' : value.toUpperCase();
//                },
            }
        },
        yaxis: {
            tooltip: {
                enabled: true
            },
            min: body.min-0.05,
            max: body.max+0.05,
            labels: {
                formatter: function (value, timestamp, index) {
                    return parseInt(value * 10) / 10;
                }
            }
        },
        grid:{
            show: true,
            row: {
                colors: ['#111', '#111', '#111']
            },
            column: {
                colors: ['#111', '#111', '#111']
            },
        }
    };

    const optionsBar = {
        chart: {
            height: 260,
            type: 'bar',
            toolbar: {show: false},
            animations: {
                enabled: false
            }
        },
        dataLabels: {
            enabled: false
        },
        stroke: {
            width: 0
        },
        series: [],
        xaxis: {
            type: 'category',
            labels: {
                trim: false,
                hideOverlappingLabels: true,
                formatter: function (value, timestamp, index) {
                    return index%4 || !value ? '' : value.toUpperCase();
                },
            },
        },
        yaxis: {
            tooltip: {
                enabled: true
            },
            labels: {
                formatter: function (value, timestamp, index) {
                    return (value / 1000000) + "M";
                }
            }
        }
    };

    optionsCandlestick.series = [{data: body.dataCandlestick}];
    optionsBar.series = [{name: 'volume', data: body.dataBar}];

    const chartCandlestick = new ApexCharts(
            document.querySelector("#chartCandlestick"),
            optionsCandlestick
    );
//    const chartBar = new ApexCharts(
//            document.querySelector("#chartBar"),
//            optionsBar
//    );
    chartCandlestick.render();
//    chartBar.render();

}
</script>
</body>
</html>